<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–∫—É–º–µ–Ω—Ç—ã | –ú—ç—Ä–∏—è –≥–æ—Ä–æ–¥–∞ –ë–∏—à–∫–µ–∫</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Onest:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-top">
                <div class="lang-switcher">
                    <a href="#" data-lang="ru">–†–£–°</a>
                    <a href="#" data-lang="ky">–ö–´–†</a>
                </div>
                <div class="header-contacts">
                    <a href="tel:+996312616161">+996 (312) 61-61-61</a>
                    <a href="mailto:meria@bishkek.kg">meria@bishkek.kg</a>
                </div>
            </div>
            <div class="header-main">
                <a href="/" class="logo">
                    <img src="/images/gerb.png" alt="–ì–µ—Ä–± –≥–æ—Ä–æ–¥–∞ –ë–∏—à–∫–µ–∫" class="logo-img">
                    <div class="logo-text">
                        <span data-i18n="header.title">–ú–≠–†–ò–Ø –ì–û–†–û–î–ê –ë–ò–®–ö–ï–ö</span>
                        <small data-i18n="header.subtitle">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç</small>
                    </div>
                </a>
                <nav class="main-nav">
                    <a href="/" data-i18n="nav.home">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="/news.html" data-i18n="nav.news">–ù–æ–≤–æ—Å—Ç–∏</a>
                    <!-- swapped: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ -->
                    <a href="/structure.html" data-i18n="nav.structure">–°—Ç—Ä—É–∫—Ç—É—Ä–∞</a>
                    <a href="/documents.html" class="active" data-i18n="nav.documents">–î–æ–∫—É–º–µ–Ω—Ç—ã</a>
                    <a href="/contacts.html" data-i18n="nav.contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                    <a href="https://e-meria.kg" class="em-link" target="_blank" rel="noopener">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –º—ç—Ä–∏—è</a>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <section class="page-header">
            <div class="container">
                <h1 data-i18n="documents.pageTitle">–î–æ–∫—É–º–µ–Ω—Ç—ã –∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</h1>
                <div class="page-filters">
                    <div class="search-box">
                        <input type="search" id="doc-search" data-i18n-placeholder="documents.searchPlaceholder" placeholder="–ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º...">
                        <button type="button" id="search-btn">üîç</button>
                    </div>
                    <div class="filter-group">
                        <select id="doc-type">
                            <option value="" data-i18n="documents.filters.allTypes">–í—Å–µ —Ç–∏–ø—ã</option>
                            <option value="resolution" data-i18n="documents.types.resolution">–ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</option>
                            <option value="order" data-i18n="documents.types.order">–†–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–µ</option>
                            <option value="regulation" data-i18n="documents.types.regulation">–ü–æ–ª–æ–∂–µ–Ω–∏–µ</option>
                            <option value="law" data-i18n="documents.types.law">–ó–∞–∫–æ–Ω</option>
                            <option value="other" data-i18n="documents.types.other">–î—Ä—É–≥–æ–µ</option>
                        </select>
                        <select id="doc-year">
                            <option value="" data-i18n="documents.filters.allYears">–í—Å–µ –≥–æ–¥—ã</option>
                            <option value="2025">2025</option>
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                        </select>
                        <select id="doc-department">
                            <option value="" data-i18n="documents.filters.allDepartments">–í—Å–µ –æ—Ç–¥–µ–ª—ã</option>
                            <option value="mayor" data-i18n="documents.departments.mayor">–ú—ç—Ä –≥–æ—Ä–æ–¥–∞</option>
                            <option value="cityCouncil" data-i18n="documents.departments.cityCouncil">–ì–æ—Ä–æ–¥—Å–∫–æ–π –∫–µ–Ω–µ—à</option>
                            <option value="finance" data-i18n="documents.departments.finance">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç–¥–µ–ª</option>
                            <option value="construction" data-i18n="documents.departments.construction">–û—Ç–¥–µ–ª —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞</option>
                            <option value="other" data-i18n="documents.departments.other">–î—Ä—É–≥–∏–µ –æ—Ç–¥–µ–ª—ã</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>

        <section class="documents-section">
            <div class="container">
                <div class="table-responsive">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;gap:12px;flex-wrap:wrap">
                        <div id="doc-status" class="doc-status" aria-live="polite" role="status" style="color:var(--muted)"></div>
                        <div id="doc-count" class="doc-count" style="color:var(--muted);font-weight:600"></div>
                    </div>
                    <div id="doc-spinner" style="display:none;margin-bottom:12px">
                        <div class="spinner" aria-hidden="true"></div>
                    </div>

                    <!-- Card-based documents list for better readability -->
                    <div class="documents-cards" id="documents-list">
                        <div class="doc-loading" style="padding:18px;text-align:center;color:var(--muted)">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    </div>
                </div>
                <div class="pagination" id="documents-pagination">
                    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4 data-i18n="footer.contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <p data-i18n="footer.address">–ê–¥—Ä–µ—Å: –ø—Ä. –ß—É–π, 166</p>
                    <p>
                        <a href="tel:+996312616161">+996 (312) 61-61-61</a><br>
                        <a href="mailto:meria@bishkek.kg">–°–≤—è–∑–∞—Ç—å—Å—è –ø–æ e-mail</a>
                    </p>
                </div>
                <div class="footer-col">
                    <h4 data-i18n="footer.workHours">–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã</h4>
                    <p data-i18n="footer.schedule">
                        –ü–Ω-–ü—Ç: 9:00 - 18:00<br>
                        –û–±–µ–¥: 12:00 - 13:00<br>
                        –°–±-–í—Å: –í—ã—Ö–æ–¥–Ω–æ–π
                    </p>
                </div>
                <div class="footer-col">
                    <h4 data-i18n="footer.social">–ú—ã –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö</h4>
                    <div class="social-links">
                        <a href="#" class="social-link">Facebook</a>
                        <a href="#" class="social-link">Instagram</a>
                        <a href="#" class="social-link">Twitter</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p data-i18n="footer.copyright">¬© 2025 –ú—ç—Ä–∏—è –≥–æ—Ä–æ–¥–∞ –ë–∏—à–∫–µ–∫. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="/js/i18n.js"></script>
    <script>
            document.addEventListener('DOMContentLoaded', () => {
            // Static fallback dataset for 2024-2025 in case /api/documents is unavailable
            const FALLBACK_DOCUMENTS = [
                { number: 'D-2025-001', date: '2025-09-10', title: { ru: '–ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: –û —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Ä–µ–º–æ–Ω—Ç–Ω—ã—Ö —Ä–∞–±–æ—Ç –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–º —Ä–∞–π–æ–Ω–µ' }, type: 'resolution', department: 'construction', fileUrl: 'https://bishkek.gov.kg/ru/post/32204', viewUrl: 'https://bishkek.gov.kg/ru/post/32204' },
                { number: 'D-2025-002', date: '2025-09-05', title: { ru: '–†–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–µ: –û –≤—ã–¥–µ–ª–µ–Ω–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º' }, type: 'order', department: 'social', fileUrl: 'https://bishkek.gov.kg/ru/post/32202', viewUrl: 'https://bishkek.gov.kg/ru/post/32202' },
                { number: 'D-2025-003', date: '2025-08-21', title: { ru: '–û—Ç—á—ë—Ç: –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ IMPULSE ‚Äî –∏—Ç–æ–≥–∏' }, type: 'report', department: 'culture', fileUrl: 'https://bishkek.gov.kg/ru/post/32199', viewUrl: 'https://bishkek.gov.kg/ru/post/32199' },
                { number: 'D-2025-004', date: '2025-07-30', title: { ru: '–ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: –ú–µ—Ä—ã –ø–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ—Ä–æ–∂–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è' }, type: 'resolution', department: 'transport', fileUrl: 'https://bishkek.gov.kg/ru/post/32197', viewUrl: 'https://bishkek.gov.kg/ru/post/32197' },
                { number: 'D-2025-005', date: '2025-06-14', title: { ru: '–†–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–µ: –≠–ª–µ–∫—Ç—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ ‚Äî –ø—Ä–æ–µ–∫—Ç' }, type: 'order', department: 'transport', fileUrl: 'https://bishkek.gov.kg/ru/post/31520', viewUrl: 'https://bishkek.gov.kg/ru/post/31520' },
                { number: 'D-2024-001', date: '2024-12-15', title: { ru: '–†–µ–µ—Å—Ç—Ä –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º' }, type: 'order', department: 'legal', fileUrl: 'https://bishkek.gov.kg/ru/post/31477', viewUrl: 'https://bishkek.gov.kg/ru/post/31477' },
                { number: 'D-2024-002', date: '2024-09-10', title: { ru: '–û—Ç—á—ë—Ç –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É –≥–æ—Ä–æ–¥—Å–∫–æ–π —Å—Ä–µ–¥—ã' }, type: 'report', department: 'city', fileUrl: 'https://bishkek.gov.kg/ru/post/30882', viewUrl: 'https://bishkek.gov.kg/ru/post/30882' },
                { number: 'D-2024-003', date: '2024-05-20', title: { ru: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: –ó–µ–º–µ–ª—å–Ω–∞—è —Ä–µ—Ñ–æ—Ä–º–∞ ‚Äî –º–∞—Ç–µ—Ä–∏–∞–ª—ã' }, type: 'info', department: 'legal', fileUrl: 'http://www.meria.kg/ru/post/19483', viewUrl: 'http://www.meria.kg/ru/post/19483' },
                { number: 'D-2023-001', date: '2023-11-05', title: { ru: '–†–µ–µ—Å—Ç—Ä –º–æ–±–∏–ª—å–Ω—ã—Ö –≥—Ä—É–ø–ø –ø–æ –≤—ã–¥–∞—á–µ —Ç–µ—Ö–ø–∞—Å–ø–æ—Ä—Ç–æ–≤' }, type: 'order', department: 'transport', fileUrl: 'https://bishkek.gov.kg/ru/post/23317', viewUrl: 'https://bishkek.gov.kg/ru/post/23317' },
                { number: 'D-2023-002', date: '2023-08-18', title: { ru: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: –•–æ–¥ —Ä–∞–±–æ—Ç –ø–æ —Ä–µ–º–æ–Ω—Ç—É' }, type: 'info', department: 'construction', fileUrl: 'https://bishkek.gov.kg/ru/post/17923', viewUrl: 'https://bishkek.gov.kg/ru/post/17923' }
            ];

            // Small helper used by the template to avoid XSS when inserting plain text
            function escapeHtml(s) {
                if (!s && s !== 0) return '';
                return String(s)
                    .replaceAll('&', '&amp;')
                    .replaceAll('<', '&lt;')
                    .replaceAll('>', '&gt;')
                    .replaceAll('"', '&quot;')
                    .replaceAll("'", '&#039;');
            }

            // –≠–ª–µ–º–µ–Ω—Ç —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (—Å–æ–æ–±—â–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ API –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
            const statusEl = document.getElementById('doc-status');

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            const docsPerPage = 20;
            let currentPage = 1;
            let filteredDocs = [];

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
            function formatDate(dateString) {
                return new Date(dateString).toLocaleDateString(
                    currentLang === 'ru' ? 'ru-RU' : 'ky-KG',
                    { year: 'numeric', month: '2-digit', day: '2-digit' }
                );
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —É—á–µ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤
            function updateDocumentsList() {
                const typeFilter = document.getElementById('doc-type').value;
                const yearFilter = document.getElementById('doc-year').value;
                const departmentFilter = document.getElementById('doc-department').value;
                const searchQuery = document.getElementById('doc-search').value.toLowerCase();

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                const spinner = document.getElementById('doc-spinner');
                if (spinner) spinner.style.display = 'block';
                if (statusEl) statusEl.textContent = '–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç—ã...';

                fetch('/api/documents')
                    .then(response => {
                        if (!response.ok) throw new Error('api-unavailable');
                        return response.json();
                    })
                    .then(documents => {
                        if (statusEl) statusEl.textContent = `–ó–∞–≥—Ä—É–∂–µ–Ω–æ ${documents.length} –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—Å–µ—Ä–≤–µ—Ä)`;
                        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
                        filteredDocs = documents.filter(doc => {
                            const title = getLocalizedContent(doc.title, '').toLowerCase();
                            const type = doc.type;
                            const year = new Date(doc.date).getFullYear().toString();
                            const department = doc.department;

                            return (!typeFilter || type === typeFilter) &&
                                   (!yearFilter || year === yearFilter) &&
                                   (!departmentFilter || department === departmentFilter) &&
                                   (!searchQuery || title.includes(searchQuery));
                        });

                        // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
                        filteredDocs.sort((a, b) => new Date(b.date) - new Date(a.date));

                        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                        displayDocsPage(currentPage);

                        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é
                        updatePagination();
                        if (spinner) spinner.style.display = 'none';
                    })
                    .catch(error => {
                        // If API is down, use fallback dataset for last two years
                        console.warn('API documents unavailable, using fallback dataset:', error);
                        if (statusEl) statusEl.textContent = '–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 –≥–æ–¥–∞.';
                        const nowYear = new Date().getFullYear();
                        const lastTwoYears = [nowYear, nowYear - 1].map(String);
                        const fallback = FALLBACK_DOCUMENTS.filter(d => lastTwoYears.includes(new Date(d.date).getFullYear().toString()));
                        filteredDocs = fallback.sort((a,b) => new Date(b.date) - new Date(a.date));
                        displayDocsPage(currentPage);
                        updatePagination();
                        if (spinner) spinner.style.display = 'none';
                    });
            }

            // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∫–∞—Ä—Ç–æ—á–∫–∏)
            function displayDocsPage(page) {
                const startIndex = (page - 1) * docsPerPage;
                const endIndex = startIndex + docsPerPage;
                const pageDocs = filteredDocs.slice(startIndex, endIndex);

                const container = document.getElementById('documents-list');
                if (!pageDocs.length) {
                    container.innerHTML = `<div class="doc-empty" style="padding:18px;text-align:center;color:var(--muted)">–ù–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∏–ª—å—Ç—Ä—É.</div>`;
                } else {
                    container.innerHTML = pageDocs.map(doc => `
                        <article class="doc-card" data-id="${escapeHtml(doc.id || doc.number || '')}">
                            <div class="doc-card-header">
                                <div class="doc-number">${escapeHtml(doc.number || '')}</div>
                                <div class="doc-date">${formatDate(doc.date)}</div>
                            </div>
                            <h3 class="doc-title"><a href="${doc.viewUrl || doc.fileUrl || '#'}" target="_blank" rel="noopener">${escapeHtml(getLocalizedContent(doc.title))}</a></h3>
                            <div class="doc-meta">
                                <span class="badge">${getTranslation(`documents.types.${doc.type}`) || escapeHtml(doc.type || '')}</span>
                                <span class="badge muted">${getTranslation(`documents.departments.${doc.department}`) || escapeHtml(doc.department || '')}</span>
                            </div>
                            <div class="doc-actions">
                                <a href="${doc.fileUrl || doc.viewUrl || '#'}" class="action-btn">${getTranslation('documents.download') || '–°–∫–∞—á–∞—Ç—å'}</a>
                                <a href="${doc.viewUrl || doc.fileUrl || '#'}" class="action-btn">${getTranslation('documents.view') || '–ü—Ä–æ—Å–º–æ—Ç—Ä'}</a>
                            </div>
                        </article>
                    `).join('');
                }

                // Update count display
                const countEl = document.getElementById('doc-count');
                if (countEl) countEl.textContent = `${filteredDocs.length} –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤`;
            }

            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
            function updatePagination() {
                const totalPages = Math.ceil(filteredDocs.length / docsPerPage);
                const pagination = document.getElementById('documents-pagination');

                if (totalPages <= 1) {
                    pagination.innerHTML = '';
                    return;
                }

                let html = '';
                // –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
                html += `<button class="page-btn prev" ${currentPage === 1 ? 'disabled' : ''}>
                    ${getTranslation('news.pagination.prev')}
                </button>`;

                // –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
                for (let i = 1; i <= totalPages; i++) {
                    html += `<button class="page-btn ${i === currentPage ? 'active' : ''}">${i}</button>`;
                }

                // –ö–Ω–æ–ø–∫–∞ "–í–ø–µ—Ä–µ–¥"
                html += `<button class="page-btn next" ${currentPage === totalPages ? 'disabled' : ''}>
                    ${getTranslation('news.pagination.next')}
                </button>`;

                pagination.innerHTML = html;

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
                pagination.querySelectorAll('.page-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        if (btn.classList.contains('prev') && currentPage > 1) {
                            currentPage--;
                        } else if (btn.classList.contains('next') && currentPage < totalPages) {
                            currentPage++;
                        } else if (!isNaN(btn.textContent)) {
                            currentPage = parseInt(btn.textContent);
                        }
                        displayDocsPage(currentPage);
                        updatePagination();
                    });
                });
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
            ['doc-type', 'doc-year', 'doc-department'].forEach(id => {
                document.getElementById(id).addEventListener('change', () => {
                    currentPage = 1;
                    updateDocumentsList();
                });
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–∏—Å–∫–∞
            let searchTimeout;
            document.getElementById('doc-search').addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    currentPage = 1;
                    updateDocumentsList();
                }, 300);
            });

            // –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
            updateDocumentsList();
        });
    </script>
</body>
</html>